.MODEL SMALL
.STACK 100H
.DATA
.CODE

MOV AX, @DATA
MOV DS,AX

MOV AH,1
INT 21H

MOV CX,0

WHILE:

CMP AL,0DH
JE NEXT
PUSH AX
INC CX

MOV AH,1
INT 21H
JMP WHILE

NEXT:
MOV AH,2
MOV DL,0DH
INT 21H

MOV AH,2
MOV DL,0AH
INT 21H

REVERSE:
JCXZ CLOSE
POP DX
MOV AH,2
INT 21H
LOOP REVERSE

CLOSE:
MOV AH,4CH
INT 21H